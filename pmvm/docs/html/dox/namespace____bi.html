<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Python-on-a-chip: __bi Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="namespaces.html"><span>Namespace&nbsp;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>__bi Namespace Reference</h1>Provides PyMite's builtins module, <a class="el" href="namespace____bi.html" title="Provides PyMite&#39;s builtins module, __bi.">__bi</a>.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>object</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>Exception</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>AssertionError</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>Generator</b></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5d78f903d9d6556f5b4293b82abe2523"></a><!-- doxytag: member="__bi::abs" ref="5d78f903d9d6556f5b4293b82abe2523" args="" -->
def&nbsp;</td><td class="memItemRight" valign="bottom"><b>abs</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#083b6f20734a3569fc37270693e084e8">chr</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#2d479a5f88d1b00addc01ed80f42ce05">dir</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#c045a75d44edf9736ea038adb1e3257e">eval</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0d98a116ac4915a8e0402379002a3100"></a><!-- doxytag: member="__bi::filter" ref="0d98a116ac4915a8e0402379002a3100" args="" -->
def&nbsp;</td><td class="memItemRight" valign="bottom"><b>filter</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#b4abca33551656f38dfd784ad66618f4">globals</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#0e8c6b4ca696811584225ffd3d134ef6">id</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#d60028f1903910a6d2454da1844d5222">len</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#f02d63ab91b9f0f29188ecca23e7470c">locals</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ef83e799e2673f9f4276033b0e59eb8d"></a><!-- doxytag: member="__bi::map" ref="ef83e799e2673f9f4276033b0e59eb8d" args="" -->
def&nbsp;</td><td class="memItemRight" valign="bottom"><b>map</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#3ec4b064c72cafc4507f507f313b22ab">ord</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="04da630889942e97ce07914c844e19d9"></a><!-- doxytag: member="__bi::pow" ref="04da630889942e97ce07914c844e19d9" args="" -->
def&nbsp;</td><td class="memItemRight" valign="bottom"><b>pow</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#6338f4dcf80ccd5ebe01cb24ab5d0a4a">range</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#6e73973f1d71da80387796d084b5c5d8">sum</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#e2e419c919f9d9e3e4509b43e1b57ee4">type</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#911560516fb7efd24a4a8ef0986e64cd">Co</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace____bi.html#88807f583fe8f6e6a04bf844bf275cd3">ismain</a></td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4a64521fc04a0993a4571272407bc55d"></a><!-- doxytag: member="__bi::__name__" ref="4a64521fc04a0993a4571272407bc55d" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><b>__name__</b> = &quot;TBD&quot;</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Provides PyMite's builtins module, <a class="el" href="namespace____bi.html" title="Provides PyMite&#39;s builtins module, __bi.">__bi</a>. 
<p>
<b>USAGE</b><p>
The builtins are loaded by the interpreter. The user SHOULD NOT import this module directly. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="083b6f20734a3569fc37270693e084e8"></a><!-- doxytag: member="__bi::chr" ref="083b6f20734a3569fc37270693e084e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::chr           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>n</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
pPmObj_t ps;
pPmObj_t pn;
int32_t n;
PmReturn_t retval;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 1)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Raise TypeError if arg is not an int */
pn = NATIVE_GET_LOCAL(0);
if (OBJ_GET_TYPE(pn) != OBJ_TYPE_INT)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Raise ValueError if arg is not int within range(256) */
n = ((pPmInt_t)pn)-&gt;val;
if ((n &lt; 0) || (n &gt; 255))
{
    PM_RAISE(retval, PM_RET_EX_VAL);
    return retval;
}

/* Create char string from  integer value */
retval = string_newFromChar((uint8_t)n, &amp;ps);
NATIVE_SET_TOS(ps);
return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00030">30</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="911560516fb7efd24a4a8ef0986e64cd"></a><!-- doxytag: member="__bi::Co" ref="911560516fb7efd24a4a8ef0986e64cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::Co           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>i</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
PmReturn_t retval;
pPmObj_t pimg;
pPmObj_t pco;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 1)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Raise ValueError if arg is not a string */
pimg = NATIVE_GET_LOCAL(0);
if (OBJ_GET_TYPE(pimg) != OBJ_TYPE_CIO)
{
    PM_RAISE(retval, PM_RET_EX_VAL);
    return retval;
}

/* Create a code object from the image */
retval = obj_loadFromImgObj(pimg, &amp;pco);
PM_RETURN_IF_ERROR(retval);

/* Return the code object */
NATIVE_SET_TOS(pco);
return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00675">675</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="2d479a5f88d1b00addc01ed80f42ce05"></a><!-- doxytag: member="__bi::dir" ref="2d479a5f88d1b00addc01ed80f42ce05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::dir           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>o</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
PmReturn_t retval = PM_RET_OK;
pPmObj_t po;
pPmObj_t pk;
pPmObj_t pl;
pSeglist_t psl;
int16_t i;
uint8_t objid;

/* Use globals if no arg given */
if (NATIVE_GET_NUM_ARGS() == 0)
{
    /* Get the globals dict */
    po = (pPmObj_t)NATIVE_GET_PFRAME()-&gt;fo_globals;
}

/* Otherwise use the given arg */
else if (NATIVE_GET_NUM_ARGS() == 1)
{
    po = NATIVE_GET_LOCAL(0);

    /* If object is a function or module, use its attrs dict */
    if ((OBJ_GET_TYPE(po) == OBJ_TYPE_FXN)
        || (OBJ_GET_TYPE(po) == OBJ_TYPE_MOD))
    {
        po = (pPmObj_t)((pPmFunc_t)po)-&gt;f_attrs;
    }

#ifdef HAVE_CLASSES
    else if (OBJ_GET_TYPE(po) == OBJ_TYPE_CLO)
    {
        po = (pPmObj_t)((pPmClass_t)po)-&gt;cl_attrs;
    }
    else if (OBJ_GET_TYPE(po) == OBJ_TYPE_CLI)
    {
        po = (pPmObj_t)((pPmInstance_t)po)-&gt;cli_attrs;
    }
    else if (OBJ_GET_TYPE(po) == OBJ_TYPE_MTH)
    {
        po = (pPmObj_t)((pPmMethod_t)po)-&gt;m_attrs;
    }
#endif /* HAVE_CLASSES */

    else
    {
        po = C_NULL;
    }
}

/* Raise TypeError if wrong number of args */
else
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

if (po == C_NULL)
{
    pl = PM_NONE;
}
else
{
    /* Create new list */
    retval = list_new(&amp;pl);
    PM_RETURN_IF_ERROR(retval);

    /* Copy dict's keys to the list */
    psl = ((pPmDict_t)po)-&gt;d_keys;
    for (i = 0; i &lt; ((pPmDict_t)po)-&gt;length; i++)
    {
        retval = seglist_getItem(psl, i, &amp;pk);
        PM_RETURN_IF_ERROR(retval);
        heap_gcPushTempRoot(pl, &amp;objid);
        retval = list_append(pl, pk);
        heap_gcPopTempRoot(objid);
        PM_RETURN_IF_ERROR(retval);
    }
}

NATIVE_SET_TOS(pl);
return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00068">68</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="c045a75d44edf9736ea038adb1e3257e"></a><!-- doxytag: member="__bi::eval" ref="c045a75d44edf9736ea038adb1e3257e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::eval           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>co</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>g</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>l</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
PmReturn_t retval;
pPmObj_t pco;
pPmObj_t pfunc;
pPmObj_t pnewframe;
pPmObj_t pg = C_NULL;
pPmObj_t pl = C_NULL;
uint8_t objid;

/* If wrong number of args, raise TypeError */
if ((NATIVE_GET_NUM_ARGS() == 0) || (NATIVE_GET_NUM_ARGS() &gt; 3))
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Raise ValueError if first arg is not a Code Object */
pco = NATIVE_GET_LOCAL(0);
if (OBJ_GET_TYPE(pco) != OBJ_TYPE_COB)
{
    PM_RAISE(retval, PM_RET_EX_VAL);
    return retval;
}

/* If 2nd arg exists, raise ValueError if it is not a Dict */
if (NATIVE_GET_NUM_ARGS() &gt;= 2)
{
    pg = NATIVE_GET_LOCAL(1);
    if (OBJ_GET_TYPE(pg) != OBJ_TYPE_DIC)
    {
        PM_RAISE(retval, PM_RET_EX_VAL);
        return retval;
    }
}

/* If no args are given, use the caller's globals for the function's */
else
{
    pg = (pPmObj_t)NATIVE_GET_PFRAME()-&gt;fo_globals;
}

/* If 3rd arg exists, raise ValueError if it is not a Dict */
if (NATIVE_GET_NUM_ARGS() &gt;= 3)
{
    pl = NATIVE_GET_LOCAL(2);
    if (OBJ_GET_TYPE(pl) != OBJ_TYPE_DIC)
    {
        PM_RAISE(retval, PM_RET_EX_VAL);
        return retval;
    }
}

/* Create func from code object */
retval = func_new(pco, pg, &amp;pfunc);
PM_RETURN_IF_ERROR(retval);

/* Create frame from module object; globals is set to null */
heap_gcPushTempRoot(pfunc, &amp;objid);
retval = frame_new(pfunc, &amp;pnewframe);
heap_gcPopTempRoot(objid);
PM_RETURN_IF_ERROR(retval);

/* TODO: Reclaim pnewframe's attrs dict created in frame_new */
/*
 * By default use calling frame's attrs as local namespace.
 * This works for ipm because the interactive mode
 * needs a locals namespace that persists across calls to eval()
 */
((pPmFrame_t)pnewframe)-&gt;fo_attrs = NATIVE_GET_PFRAME()-&gt;fo_attrs;

/* If 2nd arg exists, use it as the global namespace for the new func */
if (NATIVE_GET_NUM_ARGS() &gt;= 2)
{
    ((pPmFrame_t)pnewframe)-&gt;fo_globals = (pPmDict_t)pg;

    /* If only globals is given, locals defaults to it */
    ((pPmFrame_t)pnewframe)-&gt;fo_attrs = (pPmDict_t)pg;
}

/* If 3rd arg exists, use it as the local namespace for the new func */
if (NATIVE_GET_NUM_ARGS() &gt;= 3)
{
    ((pPmFrame_t)pnewframe)-&gt;fo_attrs = (pPmDict_t)pl;
}

/*
 * Set the fo_back frame so flow returns to eval()'s caller when completed.
 * Set the frame pointer so the new frame is interpreted immediately
 * after this function returns.
 */
((pPmFrame_t)pnewframe)-&gt;fo_back = NATIVE_GET_PFRAME();
NATIVE_GET_PFRAME() = (pPmFrame_t)pnewframe;
retval = PM_RET_FRAME_SWITCH;

return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00159">159</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="b4abca33551656f38dfd784ad66618f4"></a><!-- doxytag: member="__bi::globals" ref="b4abca33551656f38dfd784ad66618f4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::globals           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
pPmObj_t pr = C_NULL;
PmReturn_t retval;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 0)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Return calling frame's globals dict  on stack*/
pr = (pPmObj_t)NATIVE_GET_PFRAME()-&gt;fo_globals;
NATIVE_SET_TOS(pr);

return PM_RET_OK;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00263">263</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="0e8c6b4ca696811584225ffd3d134ef6"></a><!-- doxytag: member="__bi::id" ref="0e8c6b4ca696811584225ffd3d134ef6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::id           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>o</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
PmReturn_t retval;
pPmObj_t pr = C_NULL;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 1)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Return object's address as an int on the stack */
retval = int_new((intptr_t)NATIVE_GET_LOCAL(0), &amp;pr);
NATIVE_SET_TOS(pr);

return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00284">284</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="88807f583fe8f6e6a04bf844bf275cd3"></a><!-- doxytag: member="__bi::ismain" ref="88807f583fe8f6e6a04bf844bf275cd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::ismain           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__

NATIVE_SET_TOS((NATIVE_GET_PFRAME()-&gt;fo_isImport) ? PM_FALSE : PM_TRUE);

return PM_RET_OK;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00901">901</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="d60028f1903910a6d2454da1844d5222"></a><!-- doxytag: member="__bi::len" ref="d60028f1903910a6d2454da1844d5222" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::len           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
PmReturn_t retval;
pPmObj_t ps = C_NULL;
pPmObj_t pr = C_NULL;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 1)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Get first arg */
ps = NATIVE_GET_LOCAL(0);

#ifdef HAVE_BYTEARRAY
/* If object is an instance, get the thing it contains */
if (OBJ_GET_TYPE(ps) == OBJ_TYPE_CLI)
{
    retval = dict_getItem((pPmObj_t)((pPmInstance_t)ps)-&gt;cli_attrs,
                          PM_NONE,
                          &amp;pr);

    /* If None wasn't in attributes, obj is wrong type for len() */
    if (retval == PM_RET_EX_KEY) retval = PM_RET_EX_TYPE;
    PM_RETURN_IF_ERROR(retval);
    ps = pr;
}
#endif /* HAVE_BYTEARRAY */

/* Get the length of the arg based on its type */
switch (OBJ_GET_TYPE(ps))
{
    case OBJ_TYPE_STR:
        retval = int_new(((pPmString_t)ps)-&gt;length, &amp;pr);
        break;

    case OBJ_TYPE_TUP:
        retval = int_new(((pPmTuple_t)ps)-&gt;length, &amp;pr);
        break;

    case OBJ_TYPE_LST:
        retval = int_new(((pPmList_t)ps)-&gt;length, &amp;pr);
        break;

    case OBJ_TYPE_DIC:
        retval = int_new(((pPmDict_t)ps)-&gt;length, &amp;pr);
        break;

#ifdef HAVE_BYTEARRAY
    case OBJ_TYPE_BYA:
        retval = int_new(((pPmBytearray_t)ps)-&gt;length, &amp;pr);
        break;
#endif /* HAVE_BYTEARRAY */

    default:
        /* If not a string or sequence type, raise TypeError */
        PM_RAISE(retval, PM_RET_EX_TYPE);
}

NATIVE_SET_TOS(pr);
return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00311">311</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="f02d63ab91b9f0f29188ecca23e7470c"></a><!-- doxytag: member="__bi::locals" ref="f02d63ab91b9f0f29188ecca23e7470c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::locals           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
pPmObj_t pr = C_NULL;
PmReturn_t retval;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 0)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Return calling frame's local attrs dict on the stack */
pr = (pPmObj_t)NATIVE_GET_PFRAME()-&gt;fo_attrs;
NATIVE_SET_TOS(pr);

return PM_RET_OK;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00378">378</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="3ec4b064c72cafc4507f507f313b22ab"></a><!-- doxytag: member="__bi::ord" ref="3ec4b064c72cafc4507f507f313b22ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::ord           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
pPmObj_t ps;
pPmObj_t pn;
int32_t n;
PmReturn_t retval;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 1)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

ps = NATIVE_GET_LOCAL(0);

/* Raise TypeError if arg is not string of length 1 */
if ((OBJ_GET_TYPE(ps) != OBJ_TYPE_STR)
    || (((pPmString_t)ps)-&gt;length != 1))

{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Get integer value of character */
n = ((pPmString_t)ps)-&gt;val[0];
retval = int_new(n, &amp;pn);
NATIVE_SET_TOS(pn);
return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00413">413</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="6338f4dcf80ccd5ebe01cb24ab5d0a4a"></a><!-- doxytag: member="__bi::range" ref="6338f4dcf80ccd5ebe01cb24ab5d0a4a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::range           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>c</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
PmReturn_t retval;
pPmObj_t pa = C_NULL;
pPmObj_t pb = C_NULL;
pPmObj_t pc = C_NULL;
pPmObj_t pi = C_NULL;
pPmObj_t pr = C_NULL;
int16_t i = 0;
uint8_t objid1, objid2;

switch (NATIVE_GET_NUM_ARGS())
{
    case 1:
        pa = PM_ZERO;
        pb = NATIVE_GET_LOCAL(0);
        pc = PM_ONE;
        break;

    case 2:
        pa = NATIVE_GET_LOCAL(0);
        pb = NATIVE_GET_LOCAL(1);
        pc = PM_ONE;
        break;

    case 3:
        pa = NATIVE_GET_LOCAL(0);
        pb = NATIVE_GET_LOCAL(1);
        pc = NATIVE_GET_LOCAL(2);

        /* If 3rd arg is 0, ValueError */
        if (((pPmInt_t)pc)-&gt;val == 0)
        {
            PM_RAISE(retval, PM_RET_EX_VAL);
            return retval;
        }
        break;

    default:
        /* If wrong number of args, raise TypeError */
        PM_RAISE(retval, PM_RET_EX_TYPE);
        return retval;
}

/* Allocate list */
retval = list_new(&amp;pr);
PM_RETURN_IF_ERROR(retval);

/* Iterate depending on counting direction */
if (((pPmInt_t)pc)-&gt;val &gt; 0)
{
    for (i = ((pPmInt_t)pa)-&gt;val;
         i &lt; ((pPmInt_t)pb)-&gt;val;
         i += ((pPmInt_t)pc)-&gt;val)
    {
        heap_gcPushTempRoot(pr, &amp;objid1);
        retval = int_new(i, &amp;pi);
        if (retval != PM_RET_OK)
        {
            heap_gcPopTempRoot(objid1);
            return retval;
        }

        heap_gcPushTempRoot(pi, &amp;objid2);
        retval = list_append(pr, pi);
        heap_gcPopTempRoot(objid1);
        PM_RETURN_IF_ERROR(retval);
    }
}
else
{
    for (i = ((pPmInt_t)pa)-&gt;val;
         i &gt; ((pPmInt_t)pb)-&gt;val;
         i += ((pPmInt_t)pc)-&gt;val)
    {
        heap_gcPushTempRoot(pr, &amp;objid1);
        retval = int_new(i, &amp;pi);
        if (retval != PM_RET_OK)
        {
            heap_gcPopTempRoot(objid1);
            return retval;
        }

        heap_gcPushTempRoot(pi, &amp;objid2);
        retval = list_append(pr, pi);
        heap_gcPopTempRoot(objid1);
        PM_RETURN_IF_ERROR(retval);
    }
}

/* Return list */
NATIVE_SET_TOS(pr);
return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00451">451</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="6e73973f1d71da80387796d084b5c5d8"></a><!-- doxytag: member="__bi::sum" ref="6e73973f1d71da80387796d084b5c5d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::sum           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
pPmObj_t ps;
pPmObj_t pn;
pPmObj_t po;
int32_t n;
uint16_t len;
uint16_t i;
PmReturn_t retval;
#ifdef HAVE_FLOAT
float f;
uint8_t usefloat = C_FALSE;
#endif /* HAVE_FLOAT */

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 1)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Get the length of the sequence */
ps = NATIVE_GET_LOCAL(0);
if (OBJ_GET_TYPE(ps) == OBJ_TYPE_TUP)
{
    len = ((pPmTuple_t)ps)-&gt;length;
}
else if (OBJ_GET_TYPE(ps) == OBJ_TYPE_LST)
{
    len = ((pPmList_t)ps)-&gt;length;
}

/* Raise TypeError if arg is not a sequence */
else
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Calculate the sum of the sequence */
n = 0;
#ifdef HAVE_FLOAT
f = 0.0;
#endif
for (i = 0; i &lt; len; i++)
{
    retval = seq_getSubscript(ps, i, &amp;po);

    if (OBJ_GET_TYPE(po) == OBJ_TYPE_INT)
    {
        /* Add value to sum */
        n += ((pPmInt_t)po)-&gt;val;
#ifdef HAVE_FLOAT
        f += (float)((pPmInt_t)po)-&gt;val;
#endif /* HAVE_FLOAT */
    }

#ifdef HAVE_FLOAT
    else if (OBJ_GET_TYPE(po) == OBJ_TYPE_FLT)
    {
        /* Add value to sum */
        f += ((pPmFloat_t)po)-&gt;val;
        usefloat = C_TRUE;
    }
#endif /* HAVE_FLOAT */

    /* Raise TypeError if item is not an integer */
    else
    {
        PM_RAISE(retval, PM_RET_EX_TYPE);
        return retval;
    }
}

#ifdef HAVE_FLOAT
if (usefloat)
{
    retval = float_new(f, &amp;pn);
}
else
#endif /* HAVE_FLOAT */
{
    retval = int_new(n, &amp;pn);
}
NATIVE_SET_TOS(pn);
return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00548">548</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="e2e419c919f9d9e3e4509b43e1b57ee4"></a><!-- doxytag: member="__bi::type" ref="e2e419c919f9d9e3e4509b43e1b57ee4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __bi::type           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>o</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="fragment"><pre class="fragment">__NATIVE__
PmReturn_t retval;
pPmObj_t po = C_NULL;
pPmObj_t pr = C_NULL;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 1)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Get arg */
po = NATIVE_GET_LOCAL(0);

/* Create int from type enum */
retval = int_new(OBJ_GET_TYPE(po), &amp;pr);
NATIVE_SET_TOS(pr);
return retval;
</pre></div> 
<p>Definition at line <a class="el" href="____bi_8py_source.html#l00638">638</a> of file <a class="el" href="____bi_8py_source.html">__bi.py</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 18 07:40:49 2010 for Python-on-a-chip by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
