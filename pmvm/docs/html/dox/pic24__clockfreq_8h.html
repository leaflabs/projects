<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Python-on-a-chip: src/platform/pic24/include/pic24_clockfreq.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_ff1f71d793b0515fd7dbd2b1cc3fec2f.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_2c625301b0ca3cea9e351d6d9d508db6.html">platform</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_c9bf31d8fd1519586bf3b2a638186d26.html">pic24</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_f48e1b8378cd93b454a95fc1e7fde775.html">include</a>
  </div>
</div>
<div class="contents">
<h1>pic24_clockfreq.h File Reference</h1>
<p>
<a href="pic24__clockfreq_8h_source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#b2de3ee577ee3013b8954a5cfa7a9805">CLOCK_CONFIG</a>&nbsp;&nbsp;&nbsp;SIM_CLOCK</td></tr>

<tr><td colspan="2"><div class="groupHeader">#defines for CLOCK_CONFIG</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#a276553dfc62bbb7cd17dc25a0a60cf3">SIM_CLOCK</a>&nbsp;&nbsp;&nbsp;0,            -1,            1000000L, POSCMD_NONE,       -1,  1,                                  configClockSim,                            498</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="05e550657fb65bab5230557f350bee6e"></a><!-- doxytag: member="pic24_clockfreq.h::FRCPLL_FCY16MHz" ref="05e550657fb65bab5230557f350bee6e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>FRCPLL_FCY16MHz</b>&nbsp;&nbsp;&nbsp;1,            FNOSC_FRCPLL, 16000000L, POSCMD_NONE,       -1,  (PIC24F_DEFINED || PIC24FK_DEFINED),  configClockFRCPLL_FCY16MHz,                498</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f91a42908f7ab1711e361231f974b2a2"></a><!-- doxytag: member="pic24_clockfreq.h::FRC_FCY4MHz" ref="f91a42908f7ab1711e361231f974b2a2" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>FRC_FCY4MHz</b>&nbsp;&nbsp;&nbsp;2,            FNOSC_FRC,     4000000L, POSCMD_NONE,       -1,  (PIC24F_DEFINED || PIC24FK_DEFINED),  configClockFRC_FCY4MHz,                    498</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ce456ea7fe30b8478f8275b40807cde7"></a><!-- doxytag: member="pic24_clockfreq.h::PRI_NO_PLL_7372KHzCrystal" ref="ce456ea7fe30b8478f8275b40807cde7" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PRI_NO_PLL_7372KHzCrystal</b>&nbsp;&nbsp;&nbsp;3,            FNOSC_PRI,     3686400L, POSCMD_XT,   7372800L,  (PIC24F_DEFINED || PIC24FK_DEFINED || PIC24H_DEFINED || dsPIC33F_DEFINED), configClockPRI_NO_PLL_7372KHzCrystal,      498</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="140dbd339cdf5491b049ad00db930698"></a><!-- doxytag: member="pic24_clockfreq.h::FRC_FCY3685KHz" ref="140dbd339cdf5491b049ad00db930698" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>FRC_FCY3685KHz</b>&nbsp;&nbsp;&nbsp;4,            FNOSC_FRC,     3685000L, POSCMD_NONE,       -1,  (PIC24H_DEFINED || dsPIC33F_DEFINED),                     configClockFRC_FCY3685KHz,                 498</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="455629dec2ca1e61b3814aaade06a76d"></a><!-- doxytag: member="pic24_clockfreq.h::FRCPLL_FCY40MHz" ref="455629dec2ca1e61b3814aaade06a76d" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>FRCPLL_FCY40MHz</b>&nbsp;&nbsp;&nbsp;5,            FNOSC_FRCPLL, 40000000L, POSCMD_NONE,       -1,  (PIC24H_DEFINED || dsPIC33F_DEFINED),                     configClockFRCPLL_FCY40MHz,                498</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0f464584cd3ce7fa317f92b26b6cfc83"></a><!-- doxytag: member="pic24_clockfreq.h::PRIPLL_7372KHzCrystal_40MHzFCY" ref="0f464584cd3ce7fa317f92b26b6cfc83" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PRIPLL_7372KHzCrystal_40MHzFCY</b>&nbsp;&nbsp;&nbsp;6,            FNOSC_PRIPLL, 40000000L, POSCMD_XT,   7372800L,  (PIC24H_DEFINED || dsPIC33F_DEFINED),                     configClockPRIPLL_7372KHzCrystal_40MHzFCY, 498</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="928aa62e1c319478c87bba36b6e50153"></a><!-- doxytag: member="pic24_clockfreq.h::PRIPLL_8MHzCrystal_40MHzFCY" ref="928aa62e1c319478c87bba36b6e50153" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PRIPLL_8MHzCrystal_40MHzFCY</b>&nbsp;&nbsp;&nbsp;7,            FNOSC_PRIPLL, 40000000L, POSCMD_XT,   8000000L,  (PIC24H_DEFINED || dsPIC33F_DEFINED),                     configClockPRIPLL_8MHzCrystal_40MHzFCY,    498</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="311064dfc987ff94ce3de888af15b33f"></a><!-- doxytag: member="pic24_clockfreq.h::PRIPLL_8MHzCrystal_16MHzFCY" ref="311064dfc987ff94ce3de888af15b33f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PRIPLL_8MHzCrystal_16MHzFCY</b>&nbsp;&nbsp;&nbsp;8,            FNOSC_PRIPLL, 16000000L, POSCMD_XT,   8000000L,  (PIC24F_DEFINED || PIC24FK_DEFINED),                     configClockPRIPLL_8MHzCrystal_16MHzFCY,    498</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="48b9f3c7323246ac542022d9b9e9d8f6"></a><!-- doxytag: member="pic24_clockfreq.h::PRI_8MHzCrystal_4MHzFCY" ref="48b9f3c7323246ac542022d9b9e9d8f6" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PRI_8MHzCrystal_4MHzFCY</b>&nbsp;&nbsp;&nbsp;9,            FNOSC_PRI,     4000000L, POSCMD_XT,   8000000L,  (PIC24F_DEFINED || PIC24FK_DEFINED || PIC24H_DEFINED || dsPIC33F_DEFINED), configClockPRI_8MHzCrystal_4MHzFCY,        498</td></tr>

<tr><td colspan="2"><div class="groupHeader">Some of the #defines produced by CLOCK_CONFIG choice</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#b73c42c256e4b3339cadb09d8e26115a">CLOCK_CONFIG_INDEX</a>&nbsp;&nbsp;&nbsp;GET_CLOCK_CONFIG_INDEX(CLOCK_CONFIG)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#0a1e714df61a3896f71d00ff83016975">FNOSC_SEL</a>&nbsp;&nbsp;&nbsp;GET_FNOSC_SEL(CLOCK_CONFIG)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#99d7c812ba23bfdba5d29ec2fddf1e83">FCY</a>&nbsp;&nbsp;&nbsp;GET_FCY(CLOCK_CONFIG)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#e88e4fd6fa9afb924690935d4092baaf">POSCMD_SEL</a>&nbsp;&nbsp;&nbsp;GET_POSCMD_SEL(CLOCK_CONFIG)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#55d00dbdccbb312030edd1e71696d0e1">POSC_FREQ</a>&nbsp;&nbsp;&nbsp;GET_POSC_FREQ(CLOCK_CONFIG)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#7f54f7524242dc0b982edd52f5d29720">CONFIG_DEFAULT_CLOCK</a>()&nbsp;&nbsp;&nbsp;GET_CONFIG_DEFAULT_CLOCK(CLOCK_CONFIG)()</td></tr>

<tr><td colspan="2"><div class="groupHeader">Helper macros for clock configuration</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#07a2b11a1574d4aee183495472cb9089">IS_CLOCK_CONFIG</a>(clockConfig)&nbsp;&nbsp;&nbsp;_GET_CLOCK_CONFIG_INDEX(clockConfig) == CLOCK_CONFIG_INDEX</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#5fbef09c59f551f99c1a79e3dff1b72f">GET_OSC_SEL_BITS</a>(bits)&nbsp;&nbsp;&nbsp;_GET_OSC_SEL_BITS(bits)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#48cc82e45d755fb067ec21ad11b97f03">OSC_SEL_BITS</a>&nbsp;&nbsp;&nbsp;GET_OSC_SEL_BITS(FNOSC_SEL)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#0471ea0db4cd7a2776d7441fa18f83fe">configClock</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#f30f27105b2dafe4262806b6d0fefe05">switchClock</a> (<a class="el" href="pic24__generic_8h.html#dde6aaee8457bee49c2a92621fe22b79">uint8</a> u8_source)</td></tr>

<tr><td colspan="2"><div class="groupHeader">configClock() functions for various clock setups</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="pic24__clockfreq_8h.html#5e5ed5e34c011f06dc271b7bedf0acf9">configClockSim</a> (void)</td></tr>

</table>
<hr><h2>Detailed Description</h2>
The clocking options for the PIC24 are chosen in this file. The resulting settings are used in <a class="el" href="pic24__clockfreq_8c.html">pic24_clockfreq.c</a> to configure and switch the oscillator as necessary after the chip is running.<p>
To choose a clock configuration, simply select a value for <a class="el" href="pic24__libconfig_8h.html#b2de3ee577ee3013b8954a5cfa7a9805">CLOCK_CONFIG</a> from the table there. The default selection used by most of the PIC24H examples is FRCPLL_FCY40MHz (the internal FRC+ PLL configured for FCY = 40 MHz). Some of the examples in Chapter 12 expect an external 8 MHz crystal, and use the PRIPLL_8MHzCrystal_40MHzFCY option (external 8 MHz crystal + PLL confgured for FCY = 40 MHz). If <a class="el" href="pic24__libconfig_8h.html#b2de3ee577ee3013b8954a5cfa7a9805">CLOCK_CONFIG</a> is not defined, the default choice for PIC24H processors is FRCPLL_FCY40MHz, while for PIC24F processors the default is FRCPLL_FCY16MHz (internal FRC+ PLL configured for FCY = 16 MHz).<p>
This file provides several useful defines as a result of the clock selection above:<ul>
<li><a class="el" href="pic24__libconfig_8h.html#b2de3ee577ee3013b8954a5cfa7a9805">CLOCK_CONFIG</a> itself, although this is not typically directly useful. To determine which clock configuration was chosen, use the <a class="el" href="pic24__clockfreq_8h.html#b73c42c256e4b3339cadb09d8e26115a">CLOCK_CONFIG_INDEX</a> for comparsion by applying the <a class="el" href="pic24__clockfreq_8h.html#07a2b11a1574d4aee183495472cb9089">IS_CLOCK_CONFIG</a> macro.</li><li>The oscillator source as a configuration word (<a class="el" href="pic24__clockfreq_8h.html#0a1e714df61a3896f71d00ff83016975">FNOSC_SEL</a>) and as a COSC/NOSC bitfield in the OSCCON register (<a class="el" href="pic24__clockfreq_8h.html#48cc82e45d755fb067ec21ad11b97f03">OSC_SEL_BITS</a>).</li><li>The processor clock frequency <a class="el" href="pic24__clockfreq_8h.html#99d7c812ba23bfdba5d29ec2fddf1e83">FCY</a>.</li><li>The primary oscillator type <a class="el" href="pic24__clockfreq_8h.html#e88e4fd6fa9afb924690935d4092baaf">POSCMD_SEL</a>.</li><li>The primary oscillator freqency <a class="el" href="pic24__clockfreq_8h.html#55d00dbdccbb312030edd1e71696d0e1">POSC_FREQ</a>.</li></ul>
<p>
To define a new clock configuation:<ul>
<li>Add a #define to the table (see the section "#defines for CLOCK_CONFIG").</li><li>Add a configClockXxx() function which sets up and typically switches to that clock to <a class="el" href="pic24__clockfreq_8c.html">pic24_clockfreq.c</a> and a prototype for that function in this file. </li></ul>

<p>Definition in file <a class="el" href="pic24__clockfreq_8h_source.html">pic24_clockfreq.h</a>.</p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="b2de3ee577ee3013b8954a5cfa7a9805"></a><!-- doxytag: member="pic24_clockfreq.h::CLOCK_CONFIG" ref="b2de3ee577ee3013b8954a5cfa7a9805" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLOCK_CONFIG&nbsp;&nbsp;&nbsp;SIM_CLOCK          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Clock configuration for the PIC24 - set <a class="el" href="pic24__libconfig_8h.html#b2de3ee577ee3013b8954a5cfa7a9805">CLOCK_CONFIG</a> to one of the following. Naming convention is OSCTYPE_[PRIFREQ]_FCYFREQ where OSCTYPE gives the oscillator type (see <a class="el" href="pic24__clockfreq_8h.html#0a1e714df61a3896f71d00ff83016975">FNOSC_SEL</a> for details), the optional PRIFREQ specifies primary oscillator frequency, and FCYFREQ determiens the processor clock (F<sub>CY</sub>) frequency. The "#defines for CLOCK_CONFIG" section gives the definition of the values below.<p>
<div class="fragment"><pre class="fragment">  Name                            uP
  ---------------                 ---
  <a class="code" href="pic24__clockfreq_8h.html#a276553dfc62bbb7cd17dc25a0a60cf3">SIM_CLOCK</a> (simulator)           any
  FRCPLL_FCY16MHz                 24F
  FRC_FCY4MHz                     24F
  PRIPLL_8MHzCrystal_16MHzFCY     24F
  PRI_NO_PLL_7372KHzCrystal       24F, 24H
  FRC_FCY3685KHz                  24H
  FRCPLL_FCY40MHz                 24H
  PRIPLL_7372KHzCrystal_40MHzFCY  24H
  PRIPLL_8MHzCrystal_40MHzFCY     24H
</pre></div> 
<p>Definition at line <a class="el" href="pic24__clockfreq_8h_source.html#l00097">97</a> of file <a class="el" href="pic24__clockfreq_8h_source.html">pic24_clockfreq.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="b73c42c256e4b3339cadb09d8e26115a"></a><!-- doxytag: member="pic24_clockfreq.h::CLOCK_CONFIG_INDEX" ref="b73c42c256e4b3339cadb09d8e26115a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLOCK_CONFIG_INDEX&nbsp;&nbsp;&nbsp;GET_CLOCK_CONFIG_INDEX(CLOCK_CONFIG)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A unique number is assigned to each clock configuration, in order to allow comparsions between configurations. CLOCK_CONFIG_INDEX gives the number assigned to the selected clock configuration. The macro <a class="el" href="pic24__clockfreq_8h.html#07a2b11a1574d4aee183495472cb9089">IS_CLOCK_CONFIG</a> uses this number for its comparsisons.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="pic24__clockfreq_8h.html#a276553dfc62bbb7cd17dc25a0a60cf3">SIM_CLOCK</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="7f54f7524242dc0b982edd52f5d29720"></a><!-- doxytag: member="pic24_clockfreq.h::CONFIG_DEFAULT_CLOCK" ref="7f54f7524242dc0b982edd52f5d29720" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_DEFAULT_CLOCK          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;GET_CONFIG_DEFAULT_CLOCK(CLOCK_CONFIG)()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calls one of the <a class="el" href="pic24__clockfreq_8h.html#0471ea0db4cd7a2776d7441fa18f83fe">configClock()</a> functions defined in <a class="el" href="pic24__clockfreq_8c.html">pic24_clockfreq.c</a> based on the <a class="el" href="pic24__libconfig_8h.html#b2de3ee577ee3013b8954a5cfa7a9805">CLOCK_CONFIG</a> chosen. 
</div>
</div><p>
<a class="anchor" name="99d7c812ba23bfdba5d29ec2fddf1e83"></a><!-- doxytag: member="pic24_clockfreq.h::FCY" ref="99d7c812ba23bfdba5d29ec2fddf1e83" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FCY&nbsp;&nbsp;&nbsp;GET_FCY(CLOCK_CONFIG)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
FCY specifies the resulting processor clock frequency after all PLL/divide operations take the inital clock and produce a processor clock. The units of this value are Hz, so the value 40000000L is 40 MHz.<p>
NOTE: This should be defined as a long (with a trailing L after the number) to allocate enough space to correctly store the processor clock frequency. 
</div>
</div><p>
<a class="anchor" name="0a1e714df61a3896f71d00ff83016975"></a><!-- doxytag: member="pic24_clockfreq.h::FNOSC_SEL" ref="0a1e714df61a3896f71d00ff83016975" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FNOSC_SEL&nbsp;&nbsp;&nbsp;GET_FNOSC_SEL(CLOCK_CONFIG)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Oscillator source selection for the PIC24. FNOSC_SEL is set to one of the following based on <a class="el" href="pic24__libconfig_8h.html#b2de3ee577ee3013b8954a5cfa7a9805">CLOCK_CONFIG</a> : <div class="fragment"><pre class="fragment">      Name                 Description                                    PIC24F  PIC24H
      -------------        --------------------------------------------   ------  ------
      FNOSC_FRC            Fast RC oscillator                                X      X
      FNOSC_FRCPLL         Fast RC oscillator w/ divide and PLL              X      X
      FNOSC_PRI            Primary oscillator (XT, HS, EC)                   X      X
      FNOSC_PRIPLL         Primary oscillator (XT, HS, EC) w/ PLL            X      X
      FNOSC_SOSC           Secondary oscillator                              X      X
      FNOSC_LPRC           Low power RC oscillator                           X      X
      FNOSC_FRCDIV         Fast RC oscillator with divide                    X
      FNOSC_FRCDIV16       Fast RC oscillator w/ divide by 16                       X
      FNOSC_LPRCDIVN       Low power Fast RC oscillator w/divide by N               X
</pre></div> 
</div>
</div><p>
<a class="anchor" name="5fbef09c59f551f99c1a79e3dff1b72f"></a><!-- doxytag: member="pic24_clockfreq.h::GET_OSC_SEL_BITS" ref="5fbef09c59f551f99c1a79e3dff1b72f" args="(bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_OSC_SEL_BITS          </td>
          <td>(</td>
          <td class="paramtype">bits&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;_GET_OSC_SEL_BITS(bits)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A macro to determine the NOSC/COSC bits for the OSCCON register given bits taken from the PIC24's configuration FNOSC word. 
<p>Definition at line <a class="el" href="pic24__clockfreq_8h_source.html#l00344">344</a> of file <a class="el" href="pic24__clockfreq_8h_source.html">pic24_clockfreq.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="07a2b11a1574d4aee183495472cb9089"></a><!-- doxytag: member="pic24_clockfreq.h::IS_CLOCK_CONFIG" ref="07a2b11a1574d4aee183495472cb9089" args="(clockConfig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_CLOCK_CONFIG          </td>
          <td>(</td>
          <td class="paramtype">clockConfig&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;_GET_CLOCK_CONFIG_INDEX(clockConfig) == CLOCK_CONFIG_INDEX</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A helper macro to check if the given clock configuration was selected. Example usage is given in <a class="el" href="pic24__clockfreq_8c.html">pic24_clockfreq.c</a>. A shorter example: <div class="fragment"><pre class="fragment"><span class="preprocessor">  #if IS_CLOCK_CONFIG(FRCPLL_FCY40MHz)</span>
<span class="preprocessor"></span>  ... code only included <span class="keywordflow">if</span> <a class="code" href="pic24__clockfreq_8h.html#b2de3ee577ee3013b8954a5cfa7a9805">CLOCK_CONFIG</a> is FRCPLL_FCY40MHz ...
  #endif
</pre></div> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clockConfig</em>&nbsp;</td><td>Clock configuration to compare the current clock configuation against. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="pic24__clockfreq_8h_source.html#l00338">338</a> of file <a class="el" href="pic24__clockfreq_8h_source.html">pic24_clockfreq.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="48cc82e45d755fb067ec21ad11b97f03"></a><!-- doxytag: member="pic24_clockfreq.h::OSC_SEL_BITS" ref="48cc82e45d755fb067ec21ad11b97f03" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSC_SEL_BITS&nbsp;&nbsp;&nbsp;GET_OSC_SEL_BITS(FNOSC_SEL)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A macro giving the NOSC/COSC bits for the OSCCON register which correspond to <a class="el" href="pic24__clockfreq_8h.html#0a1e714df61a3896f71d00ff83016975">FNOSC_SEL</a>, the configuration word which contains the FNOSC bits. 
<p>Definition at line <a class="el" href="pic24__clockfreq_8h_source.html#l00357">357</a> of file <a class="el" href="pic24__clockfreq_8h_source.html">pic24_clockfreq.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="55d00dbdccbb312030edd1e71696d0e1"></a><!-- doxytag: member="pic24_clockfreq.h::POSC_FREQ" ref="55d00dbdccbb312030edd1e71696d0e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POSC_FREQ&nbsp;&nbsp;&nbsp;GET_POSC_FREQ(CLOCK_CONFIG)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This values gives the primary osciallator frequency (if used). The units of this value are Hz, so the value 40000000L is 40 MHz.<p>
NOTE: This should be defined as a long (with a trailing L after the number) to allocate enough space to correctly store the processor clock frequency. 
</div>
</div><p>
<a class="anchor" name="e88e4fd6fa9afb924690935d4092baaf"></a><!-- doxytag: member="pic24_clockfreq.h::POSCMD_SEL" ref="e88e4fd6fa9afb924690935d4092baaf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POSCMD_SEL&nbsp;&nbsp;&nbsp;GET_POSCMD_SEL(CLOCK_CONFIG)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Specifies the primary oscillator type. Valid values: <div class="fragment"><pre class="fragment">      POSCMD_EC            External clock
      POSCMD_XT            XT oscillator (<span class="keywordflow">for</span> crystals from 3.5 MHz to 10 MHz)
      POSCMD_HS            HS oscillator (<span class="keywordflow">for</span> crystals from 10 MHz to 32 MHz)
      POSCMD_NONE          Primary oscillator disabled
</pre></div> 
</div>
</div><p>
<a class="anchor" name="a276553dfc62bbb7cd17dc25a0a60cf3"></a><!-- doxytag: member="pic24_clockfreq.h::SIM_CLOCK" ref="a276553dfc62bbb7cd17dc25a0a60cf3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIM_CLOCK&nbsp;&nbsp;&nbsp;0,            -1,            1000000L, POSCMD_NONE,       -1,  1,                                  configClockSim,                            498          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a table of vales for CLOCK_CONFIG. When adding a new entry, you must also write C code to configure the clock in <a class="el" href="pic24__clockfreq_8c.html">pic24_clockfreq.c</a>. See that file for examples and the detailed description section at the top of this page for more information. Note that <a class="el" href="pic24__clockfreq_8h.html#99d7c812ba23bfdba5d29ec2fddf1e83">FCY</a> and <a class="el" href="pic24__clockfreq_8h.html#55d00dbdccbb312030edd1e71696d0e1">POSC_FREQ</a> should be defined as a long (with a trailing L) to retain enough accuracy to store these values.<p>
Table entry notes: (see actual code, not the documentation, for the table)<ul>
<li>Use -1 for don't-care values</li><li>The "unique index" just means each clock configuration should be assigned a different number. Giving two configurations the same index will cause problems! <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="pic24__clockfreq_8h.html#b73c42c256e4b3339cadb09d8e26115a">CLOCK_CONFIG_INDEX</a>.</dd></dl>
</li><li>The processor field should evaluate to a Boolean value which is true if the processor under which this file is compiled is supported. Later in this file, the values PIC24F_DEFINED and PIC24H_DEFINED are set to true (1) or false (0) based on which processor this file is compiled with. Use these values in the Boolean expression. For example:<ul>
<li>1 (works on any processor)</li><li>PIC24H_DEFINED (works only on the PIC24H)</li><li>PIC24F_DEFINED || PIC24H_DEFINED (works on PIC24F and PIC24H).</li></ul>
</li><li>Valid entries for <a class="el" href="pic24__clockfreq_8h.html#0a1e714df61a3896f71d00ff83016975">FNOSC_SEL</a> are defined documentation for that variable. </li></ul>

<p>Definition at line <a class="el" href="pic24__clockfreq_8h_source.html#l00135">135</a> of file <a class="el" href="pic24__clockfreq_8h_source.html">pic24_clockfreq.h</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="0471ea0db4cd7a2776d7441fa18f83fe"></a><!-- doxytag: member="pic24_clockfreq.h::configClock" ref="0471ea0db4cd7a2776d7441fa18f83fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void configClock           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Configure the default clock by calling the <a class="el" href="pic24__clockfreq_8h.html#7f54f7524242dc0b982edd52f5d29720">CONFIG_DEFAULT_CLOCK()</a> macro. 
<p>Definition at line <a class="el" href="pic24__clockfreq_8h_source.html#l00423">423</a> of file <a class="el" href="pic24__clockfreq_8h_source.html">pic24_clockfreq.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="5e5ed5e34c011f06dc271b7bedf0acf9"></a><!-- doxytag: member="pic24_clockfreq.h::configClockSim" ref="5e5ed5e34c011f06dc271b7bedf0acf9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configClockSim           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Nothing to do! Simulator clock not set by OSCCON, but instead in the Debugger | Settings, Osc/Trace dialog box. It should be 2 MHz there, since that's Fosc = 2*Fcy. At 1 MHz, simulation speed seems fast enough to execute a reasonable amount of code. Also, at a 64K line trace buffer, we can see 64 ms of execution, which is plenty to see 20 ms servo pulses. 
</div>
</div><p>
<a class="anchor" name="f30f27105b2dafe4262806b6d0fefe05"></a><!-- doxytag: member="pic24_clockfreq.h::switchClock" ref="f30f27105b2dafe4262806b6d0fefe05" args="(uint8 u8_source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void switchClock           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pic24__generic_8h.html#dde6aaee8457bee49c2a92621fe22b79">uint8</a>&nbsp;</td>
          <td class="paramname"> <em>u8_source</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Switch the clock to the source specified. The source given will be assigned to NOSC in the OSCCON register, the a switch clock performed.<p>
Note: <b>DO NOT</b> use <a class="el" href="pic24__clockfreq_8h.html#0a1e714df61a3896f71d00ff83016975">FNOSC_SEL</a> as the source; instead, use <a class="el" href="pic24__clockfreq_8h.html#48cc82e45d755fb067ec21ad11b97f03">OSC_SEL_BITS</a>. FNOSC_SEL is for configuration bits while switchClock expects a NOSC value to write to the OSCCON register.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u8_source</em>&nbsp;</td><td>The clock source to switch to. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="pic24__clockfreq_8c_source.html#l00178">178</a> of file <a class="el" href="pic24__clockfreq_8c_source.html">pic24_clockfreq.c</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 18 07:40:48 2010 for Python-on-a-chip by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
