<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Python-on-a-chip: PIC24 support library</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="PIC24_support">PIC24 support library </a></h1>The PIC24 support library is divided into <a class="el" href="pic24_support.html#external">external components</a>, <a class="el" href="pic24_support.html#internal">internal components</a>, and <a class="el" href="pic24_support.html#codeTools">tools</a> used in creating the library. External components should be called by the typical user to set up the PIC, communicate over the UART, I<sup>2</sup>C bus, etc. Internal components include both implementation details and information on adding support for PIC24 processors not currently supported by this library. Following these three sections is a <a class="el" href="pic24_support.html#libraryFunctionSummary">library function summary</a>, listing all functions available in the library.<p>
A simple example which echos characters via the UART: <div class="fragment"><pre class="fragment"><span class="preprocessor">#include "<a class="code" href="pic24__all_8h.html">pic24_all.h</a>"</span>
<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {
  <span class="comment">// Set up clock, heartbeat, UART, print welcome message</span>
  <a class="code" href="pic24__util_8c.html#271372046d262eaed7e2d61decc50bb1">configBasic</a>(HELLO_MSG);
  <span class="keywordflow">while</span> (1) {
    <span class="comment">// Echo characters</span>
    <a class="code" href="pic24__serial_8c.html#b08fc14eef0812bc8ccc3f8e806a845f" title="A system-dependent macro to output one character.">outChar</a>(<a class="code" href="pic24__serial_8c.html#2be4c9fbb5e2267e7d73b6cbfc4b8362">inChar</a>());
  }
  <span class="keywordflow">return</span> 0;
}
</pre></div><h2><a class="anchor" name="libraryComponents">
Library components</a></h2>
<h3><a class="anchor" name="external">
External library components</a></h3>
<ul>
<li>Development support<ul>
<li>A single header file to include all the files below, in <a class="el" href="pic24__all_8h.html">pic24_all.h</a></li><li><a class="el" href="pic24_support.html#delayRoutines">Delay routines</a> in <a class="el" href="pic24__delay_8h.html">pic24_delay.h</a></li><li>Definition of <a class="el" href="pic24_support.html#dataTypes">generic data types</a> in <a class="el" href="pic24__generic_8h.html">pic24_generic.h</a></li><li><a class="el" href="pic24_support.html#portConfig">Setup of IO ports</a> in <a class="el" href="pic24__ports_8h.html">pic24_ports.h</a></li><li>Unit testing / assertions, in <a class="el" href="pic24__unittest_8h.html">pic24_unittest.h</a></li><li><a class="el" href="pic24_support.html#utils">Miscellanous utilities</a> in <a class="el" href="pic24__util_8h.html">pic24_util.h</a></li><li><a class="el" href="dataxfer.html">Debug/data tranfer</a> abilities in <a class="el" href="data_xfer_8h.html" title="Routines which implement the uC comm protocol.">dataXfer.h</a></li></ul>
</li><li>Peripheral support<ul>
<li>Analog to digital converter routines, in <a class="el" href="pic24__adc_8h.html">pic24_adc.h</a></li><li>Direct memory access (DMA) routines, in <a class="el" href="pic24__dma_8h.html">pic24_dma.h</a></li><li>Enhanced controller area network (ECAN) routines, in <a class="el" href="pic24__ecan_8h_source.html">pic24_ecan.h</a></li><li>Read/write of FLASH, in <a class="el" href="pic24__flash_8h.html">pic24_flash.h</a></li><li>Setup of timers, in <a class="el" href="pic24__timer_8h.html">pic24_timer.h</a></li><li>Serial communication support, in <a class="el" href="pic24__serial_8h.html">pic24_serial.h</a></li><li>I<sup>2</sup>C support, in <a class="el" href="pic24__i2c_8h_source.html">pic24_i2c.h</a></li><li>SPI support, in <a class="el" href="pic24__spi_8h.html">pic24_spi.h</a></li></ul>
</li></ul>
<h3><a class="anchor" name="internal">
Internal library components</a></h3>
<ul>
<li>User-configurable library settings, in <a class="el" href="pic24__libconfig_8h.html">pic24_libconfig.h</a></li><li>Clock configuration, in <a class="el" href="pic24__clockfreq_8h.html">pic24_clockfreq.h</a> and <a class="el" href="pic24__clockfreq_8c.html">pic24_clockfreq.c</a></li><li>Configuration bit settings, in <a class="el" href="pic24__configbits_8c.html">pic24_configbits.c</a></li><li>UART support in <a class="el" href="pic24__uart_8h_source.html">pic24_uart.h</a> and <a class="el" href="pic24__uart_8c_source.html">pic24_uart.c</a>, which is typically called by routines in <a class="el" href="pic24__serial_8h.html">pic24_serial.h</a>.</li></ul>
<h3><a class="anchor" name="codeTools">
Tools used to create the code</a></h3>
<a href="http://www.scons.org/">SCons</a> provides automated library building and testing. See SConstruct.py for documentation of this process. Capabilities include:<ul>
<li>Automated build of all example code in the textbook</li><li>Support for multiple copies of a device, such as the UART, I<sup>2</sup>C, and SPI, is auto-generated from templates which contain a single copy of the code. The templates/ directory contains the templates from which these files are built.</li></ul>
<p>
To maintain a consistent style, a batch file which runs the <a href="http://astyle.sourceforge.net/">Artistic Style</a> code formatter is available as runAStyle.bat.<h2><a class="anchor" name="libraryFunctionSummary">
Library function summary</a></h2>
This section lists all the commands available in the various sections of the library, providing a quick overview of the library's capabilities.<h3><a class="anchor" name="delayRoutines">
Delay routines</a></h3>
The file <a class="el" href="pic24__delay_8h.html">pic24_delay.h</a> defines:<ul>
<li><a class="el" href="pic24__libconfig_8h.html#9adb8f368f368faf5d13c1aa02107b94">DEBOUNCE_DLY</a>, <a class="el" href="pic24__delay_8h.html#22f064707db63ec3e40d5a5caf36a771">DELAY_MS(ms)</a>, <a class="el" href="pic24__delay_8h.html#60aba7cd6f93c0f065c51db5481f2cb4">DELAY_US(us)</a>, <a class="el" href="pic24__delay_8h.html#1e1844f448217847d0978635707c42d6">CYCLES_PER_MS</a>, <a class="el" href="pic24__delay_8h.html#b81cff0e46e175a7687c24e2cd937a9b">CYCLES_PER_US</a>, <a class="el" href="pic24__delay_8h.html#56d41870c21d00c1acc74dcbaae8cd80">delayAndUpdateHeartbeatCount(uint32 u32_cyc)</a></li></ul>
<h3><a class="anchor" name="dataTypes">
Generic data types</a></h3>
The file in <a class="el" href="pic24__generic_8h.html">pic24_generic.h</a> defines:<ul>
<li>Signed integers: <a class="el" href="pic24__generic_8h.html#1b956fe1df85f3c132b21edb4e116458">int8</a>, <a class="el" href="pic24__generic_8h.html#be45bc6d29b3662541576d682f6a575a">int16</a>, <a class="el" href="pic24__generic_8h.html#c44d0188f4f50fd9b03031c1a06bd0a9">int32</a>, <a class="el" href="pic24__generic_8h.html#87dc1c46a17e3ee6037afdb6aef76632">int64</a></li><li>Unsigned integers: <a class="el" href="pic24__generic_8h.html#dde6aaee8457bee49c2a92621fe22b79">uint8</a>, <a class="el" href="pic24__generic_8h.html#4a2b22a29dec0305e3f9cbc69d0ff414">uint16</a>, <a class="el" href="pic24__generic_8h.html#4b435a49c74bb91f284f075e63416cb6">uint32</a>, <a class="el" href="pic24__generic_8h.html#29940ae63ec06c9998bba873e25407ad">uint64</a></li><li>Unions: <a class="el" href="pic24__generic_8h.html#2d4e6526d82b610f4342eace2e8a899a">union16</a>, <a class="el" href="pic24__generic_8h.html#9f7ec1478abc7c1bfc034c1fe5c09e54">union32</a>, <a class="el" href="pic24__generic_8h.html#dc49c1c47c37f0154ab8eb23a25f742a">union64</a></li></ul>
<h3><a class="anchor" name="portConfig">
Setup of IO ports</a></h3>
The file <a class="el" href="pic24__ports_8h.html">pic24_ports.h</a> includes files which define:<ul>
<li>High-level port configuration: <a class="el" href="pic24__ports_8h.html#aa3e30132319c8bf08447ad87a174a59">CONFIG_Rxy_AS_DIG_OUTPUT()</a>, <a class="el" href="pic24__ports_8h.html#0d91487d89cca570f687663d70209050">CONFIG_Rxy_AS_DIG_OD_OUTPUT()</a>, <a class="el" href="pic24__ports_8h.html#9b6c1e50995fb49bac1e9ac7a1d946bf">CONFIG_Rxy_AS_DIG_INPUT()</a>, <a class="el" href="pic24__ports_8h.html#70d1e529b6ba965d928ed5ca66a67d72">CONFIG_ANx_AS_ANALOG()</a></li><li>Low-level port configuration: <a class="el" href="pic24__ports_8h.html#752aa4d7e77e549ed8f46c4af0118379">ENABLE_Rxy_ANALOG()</a>, <a class="el" href="pic24__ports_8h.html#3d559f62786f7eb7fe66b4a2f602e347">DISABLE_Rxy_ANALOG()</a>, <a class="el" href="pic24__ports_8h.html#97a0715dd9720e9fb9cfa255488afedd">CONFIG_RPy_AS_DIG_PIN()</a>, <a class="el" href="pic24__ports_8h.html#183d0c768cebce4f7a4275459b070eb4">ENABLE_Rxy_OPENDRAIN()</a>, <a class="el" href="pic24__ports_8h.html#3382acf60dab7467fc23b8f995641ae8">DISABLE_Rxy_OPENDRAIN()</a>, <a class="el" href="pic24__ports_8h.html#9f226498115288c66faa41b2e3c16fd4">ENABLE_Rxy_PULLUP()</a>, <a class="el" href="pic24__ports_8h.html#49ebe3e51dc01c77e782c19a6b52f86f">DISABLE_Rxy_PULLUP()</a>, <a class="el" href="pic24__ports_8h.html#368dee5e71ea5ac28680fee30454b268">ENABLE_Rxy_CN_INTERRUPT()</a>, <a class="el" href="pic24__ports_8h.html#d8782f5ba2b2e77734c7845599dbf73f">DISABLE_Rxy_CN_INTERRUPT()</a></li><li><a href="pic24_ports.h#remappableInputs">Remappable peripheral input support</a></li><li><a href="#remappableOutputs">Remappable peripheral output support</a> <dl class="todo" compact><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>The relative anchor links above don't work across files.</dd></dl>
</li></ul>
<h3><a class="anchor" name="utils">
Miscellaneous utility functions</a></h3>
The file pic24_utils.h includes files which define:<ul>
<li>The number of various peripherals on the chip: <a class="el" href="pic24__util_8h.html#fcc899635b779f2708042a7ba5f0ab47">NUM_UART_MODS</a>, <a class="el" href="pic24__util_8h.html#8b4f64c4586ceb2130072d768fcfee2a">NUM_I2C_MODS</a>, <a class="el" href="pic24__util_8h.html#5829648ac066cf8c0863dee06896ed18">NUM_SPI_MODS</a>, <a class="el" href="pic24__util_8h.html#34b4441eee9be6efbf733ca5a0146b6a">NUM_ECAN_MODS</a></li><li>Chip identification support, through DEV_ID_LOCATION, REVISION_LOCATION, <a class="el" href="pic24__util_8h.html#d71a1794ae86aca08aeccddaa80ace39">DEV_ID</a>, <a class="el" href="pic24__util_8h.html#bcd2e228c8afda9ca6b765f93350d280">DEV_ID_STR</a>, <a class="el" href="pic24__util_8h.html#b92319647e830ce0dc8c1e1983d41205">EXPECTED_REVISION1</a>, <a class="el" href="pic24__util_8h.html#8ed35c5ec2645ac1fd459194fef04666">EXPECTED_REVISION1_STR</a></li><li><a href="#bitfieldMacros">Bitfield struct to word/byte conversion</a>, in <a class="el" href="pic24__util_8h.html#7bfce8b7519b2d249655758a5175a345">BITS2WORD</a>, <a class="el" href="pic24__util_8h.html#de4e4a1897fac595ea2204088845a4ff">BITS2BYTEL</a>, <a class="el" href="pic24__util_8h.html#fafb3bcec758fdbb7344e44c54662880">BITS2BYTEH</a>.</li><li>More to do... </li></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 18 07:40:49 2010 for Python-on-a-chip by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
